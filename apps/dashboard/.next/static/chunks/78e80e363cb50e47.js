(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,14044,e=>{"use strict";var r=e.i(43476),a=e.i(18566);let s={"/users":(e,r)=>{let{name:a,email:s,roles:t}=e;return a?.toLowerCase().includes(r)||s?.toLowerCase().includes(r)||t?.some(e=>e.toLowerCase().includes(r))},"/projects":(e,r)=>{let{name:a,description:s,tags:t}=e;return a?.toLowerCase().includes(r)||s?.toLowerCase().includes(r)||t?.some(e=>e.toLowerCase().includes(r))},"/messages":(e,r)=>{let{userName:a,userEmail:s,message:t,reason:d}=e;return a?.toLowerCase().includes(r)||s?.toLowerCase().includes(r)||t?.toLowerCase().includes(r)||d?.toLowerCase().includes(r)},"/experiences":(e,r)=>{let{title:a,location:s,tags:t}=e;return a?.toLowerCase().includes(r)||s?.toLowerCase().includes(r)||t?.some(e=>e.toLowerCase().includes(r))}};function t({value:e,onChange:t,data:d,onFilter:o}){let l=(0,a.usePathname)();return(0,r.jsx)("input",{type:"text",placeholder:"Search...",value:e,onChange:e=>{let r,a,i,n=e.target.value;t(n),r=n.toLowerCase(),i=(a=Object.keys(s).find(e=>l.includes(e)))?s[a]:()=>!1,o(d.filter(e=>i(e,r)))},className:"border border-primary-200 dark:border-secondary-800 p-2 rounded w-1/3 bg-primary-50 dark:bg-secondary-700 text-primary-900 dark:text-secondary-50"})}e.s(["default",()=>t])},40774,e=>{"use strict";var r=e.i(43476),a=e.i(71645),s=e.i(77957);function t({user:e,isOpen:t,onClose:d,onSave:o}){let[l,i]=(0,a.useState)({name:"",email:"",password:"",roles:[],createdAt:"",updatedAt:"",loading:!1,error:""});(0,a.useEffect)(()=>{e&&i({name:e.name,email:e.email,password:e.password,roles:e.roles,createdAt:new Date(e.createdAt).toLocaleString(),updatedAt:new Date(e.updatedAt).toLocaleString(),loading:!1,error:""})},[e]);let n=e=>{let{name:r,value:a}=e.target;i(e=>({...e,[r]:"roles"===r?a.split(",").map(e=>e.trim()):a}))},c=(0,a.useCallback)(async r=>{if(r.preventDefault(),!e)return;i(e=>({...e,loading:!0,error:""}));let a={...e,name:l.name,email:l.email,password:l.password,roles:l.roles};try{let r=await fetch(`/api/users/${e._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(r.ok){let e=await r.json();o(e.user),d()}else{let e=await r.json();i(r=>({...r,error:e.error||"Failed to update user",loading:!1}))}}catch(e){console.error("Error updating user:",e),i(e=>({...e,error:"Server error. Please try again.",loading:!1}))}},[l,e,o,d]);return t?(0,r.jsx)("div",{className:"fixed inset-0 bg-primary-900/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:(0,r.jsxs)("div",{className:"bg-primary-50 dark:bg-primary-900 text-primary-900 dark:text-secondary-50 p-6 rounded-lg max-w-lg w-full grid gap-4 border border-primary-200 dark:border-secondary-700 shadow-lg",children:[(0,r.jsx)("h2",{className:"text-xl font-bold",children:"Edit User"}),l.error&&(0,r.jsx)("p",{className:"text-primary-900 dark:text-secondary-50 bg-primary-100 dark:bg-secondary-800 p-2 rounded",children:l.error}),(0,r.jsxs)("form",{onSubmit:c,className:"grid gap-4",children:[["name","email","password","roles","createdAt","updatedAt"].map(e=>(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)("label",{className:"text-sm font-semibold text-primary-900 dark:text-secondary-50",children:"roles"===e?"Roles (comma-separated)":"createdAt"===e?"Created At":"updatedAt"===e?"Updated At":e.charAt(0).toUpperCase()+e.slice(1)}),(0,r.jsx)("input",{type:"email"===e?"email":"password"===e?"password":"text",name:e,className:"w-full p-2 border rounded border-primary-200 dark:border-secondary-800 bg-primary-100 dark:bg-secondary-700 text-primary-900 dark:text-secondary-50",value:"roles"===e?l.roles.join(", "):l[e],onChange:n,disabled:"createdAt"===e||"updatedAt"===e,required:["name","email","password","roles"].includes(e)})]},e)),(0,r.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,r.jsx)(s.default,{type:"button",onClick:d,disabled:l.loading,variant:"ghost",size:"sm",children:"Cancel"}),(0,r.jsx)(s.default,{type:"submit",disabled:l.loading,variant:"secondary",size:"sm",children:l.loading?"Saving...":"Save"})]})]})]})}):null}let d=({isOpen:e,onClose:t,onSave:d})=>{let[o,l]=(0,a.useState)(""),[i,n]=(0,a.useState)(""),[c,m]=(0,a.useState)(""),[p,u]=(0,a.useState)(""),[y,b]=(0,a.useState)(!1),[x,h]=(0,a.useState)(""),g=()=>{l(""),n(""),m(""),u(""),h("")},f=async()=>{if(!o||!i||!c)return void h("All fields are required.");let e=p.split(",").map(e=>e.trim());b(!0);try{await d({name:o,email:i,password:c,roles:e}),g(),t()}catch(e){console.error(e),h("Failed to create user.")}finally{b(!1)}};return e?(0,r.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-primary-900/50 z-50",children:(0,r.jsxs)("div",{className:"bg-primary-50 dark:bg-primary-900 text-primary-900 dark:text-secondary-50 p-4 rounded w-full max-w-md shadow-lg border border-primary-200 dark:border-secondary-700",children:[(0,r.jsx)("h2",{className:"text-xl mb-4 font-semibold",children:"Add New User"}),x&&(0,r.jsx)("p",{className:"text-red-600 mb-2",children:x}),(0,r.jsx)("label",{className:"block mb-2",children:"Name"}),(0,r.jsx)("input",{type:"text",value:o,onChange:e=>l(e.target.value),className:"w-full p-2 border border-primary-200 dark:border-secondary-800 rounded mb-4 bg-primary-50 dark:bg-secondary-700 text-primary-900 dark:text-secondary-50"}),(0,r.jsx)("label",{className:"block mb-2",children:"Email"}),(0,r.jsx)("input",{type:"email",value:i,onChange:e=>n(e.target.value),className:"w-full p-2 border border-primary-200 dark:border-secondary-800 rounded mb-4 bg-primary-50 dark:bg-secondary-700 text-primary-900 dark:text-secondary-50"}),(0,r.jsx)("label",{className:"block mb-2",children:"Password"}),(0,r.jsx)("input",{type:"password",value:c,onChange:e=>m(e.target.value),className:"w-full p-2 border border-primary-200 dark:border-secondary-800 rounded mb-4 bg-primary-50 dark:bg-secondary-700 text-primary-900 dark:text-secondary-50"}),(0,r.jsx)("label",{className:"block mb-2",children:"Roles (comma separated)"}),(0,r.jsx)("input",{type:"text",value:p,onChange:e=>u(e.target.value),className:"w-full p-2 border border-primary-200 dark:border-secondary-800 rounded mb-4 bg-primary-50 dark:bg-secondary-700 text-primary-900 dark:text-secondary-50"}),(0,r.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,r.jsx)(s.default,{onClick:f,disabled:y,variant:"secondary",size:"sm",children:y?"Saving...":"Save"}),(0,r.jsx)(s.default,{onClick:()=>{g(),t()},variant:"ghost",size:"sm",children:"Cancel"})]})]})}):null};var o=e.i(14044);function l(){let[e,l]=(0,a.useState)([]),[i,n]=(0,a.useState)(""),[c,m]=(0,a.useState)([]),[p,u]=(0,a.useState)(null),[y,b]=(0,a.useState)(!1),x=(0,a.useCallback)(async()=>{try{let e=await fetch("/api/users");if(!e.ok)throw Error("Failed to fetch users");let{users:r}=await e.json();l(r),m(r)}catch(e){console.error(e)}},[]);(0,a.useEffect)(()=>{x()},[x]);let h=async r=>{if(confirm("Are you sure you want to delete this user?"))try{if(!(await fetch(`/api/users/${r}`,{method:"DELETE"})).ok)throw Error("Failed to delete user");let a=e.filter(e=>e._id!==r);l(a),m(a)}catch(e){console.error(e)}},g=async e=>{try{let r=await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!r.ok){let e=await r.json();throw Error(e.error||"Failed to add user")}await x(),b(!1)}catch(e){console.error("Error creating user:",e)}};return(0,r.jsxs)("div",{className:"space-y-6 p-4 text-primary-900 dark:text-secondary-50",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold",children:"Manage Users"}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)(o.default,{value:i,onChange:n,data:e,onFilter:e=>m(e)}),(0,r.jsx)(s.default,{onClick:()=>b(!0),variant:"secondary",size:"sm",children:"Add User"})]}),(0,r.jsx)("div",{className:"overflow-x-auto border border-primary-200 dark:border-secondary-700 rounded",children:(0,r.jsxs)("table",{className:"w-full border-collapse",children:[(0,r.jsx)("thead",{className:"bg-primary-200 text-primary-900 dark:bg-secondary-700 dark:text-secondary-50",children:(0,r.jsx)("tr",{className:"text-left",children:["Name","Email","Roles","Created At","Updated At","Status","Actions"].map(e=>(0,r.jsx)("th",{className:"border border-primary-200 dark:border-secondary-700 p-3",children:e},e))})}),(0,r.jsx)("tbody",{className:"dark:bg-secondary-800",children:c.map((e,a)=>(0,r.jsxs)("tr",{className:`${a%2==0?"bg-primary-50 dark:bg-secondary-900":"bg-primary-100 dark:bg-secondary-800"} hover:bg-primary-200 dark:hover:bg-secondary-700`,children:[(0,r.jsx)("td",{className:"border border-primary-200 dark:border-secondary-700 p-3",children:e.name}),(0,r.jsx)("td",{className:"border border-primary-200 dark:border-secondary-700 p-3",children:e.email}),(0,r.jsx)("td",{className:"border border-primary-200 dark:border-secondary-700 p-3",children:e.roles.join(", ")}),(0,r.jsx)("td",{className:"border border-primary-200 dark:border-secondary-700 p-3",children:new Date(e.createdAt).toLocaleString()}),(0,r.jsx)("td",{className:"border border-primary-200 dark:border-secondary-700 p-3",children:new Date(e.updatedAt).toLocaleString()}),(0,r.jsx)("td",{className:"border border-primary-200 dark:border-secondary-700 p-3",children:(0,r.jsx)("span",{className:e.isOnline?"text-green-600":"text-gray-500",children:e.isOnline?"Online":"Offline"})}),(0,r.jsxs)("td",{className:"grid gap-2 border border-primary-200 dark:border-secondary-700 p-3 text-center",children:[(0,r.jsx)(s.default,{onClick:()=>u(e),variant:"ghost",size:"sm",className:"text-primary-900 hover:text-primary-700 dark:text-secondary-50 dark:hover:text-secondary-200",children:"Edit"}),(0,r.jsx)(s.default,{onClick:()=>h(e._id),variant:"danger",size:"sm",children:"Delete"})]})]},e._id))})]})}),p&&(0,r.jsx)(t,{user:p,isOpen:!!p,onClose:()=>u(null),onSave:x}),y&&(0,r.jsx)(d,{isOpen:y,onClose:()=>b(!1),onSave:g})]})}e.s(["default",()=>l],40774)}]);