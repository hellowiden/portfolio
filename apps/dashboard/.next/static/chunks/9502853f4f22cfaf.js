(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,14044,e=>{"use strict";var r=e.i(43476),s=e.i(18566);let t={"/users":(e,r)=>{let{name:s,email:t,roles:a}=e;return s?.toLowerCase().includes(r)||t?.toLowerCase().includes(r)||a?.some(e=>e.toLowerCase().includes(r))},"/projects":(e,r)=>{let{name:s,description:t,tags:a}=e;return s?.toLowerCase().includes(r)||t?.toLowerCase().includes(r)||a?.some(e=>e.toLowerCase().includes(r))},"/messages":(e,r)=>{let{userName:s,userEmail:t,message:a,reason:o}=e;return s?.toLowerCase().includes(r)||t?.toLowerCase().includes(r)||a?.toLowerCase().includes(r)||o?.toLowerCase().includes(r)},"/experiences":(e,r)=>{let{title:s,location:t,tags:a}=e;return s?.toLowerCase().includes(r)||t?.toLowerCase().includes(r)||a?.some(e=>e.toLowerCase().includes(r))}};function a({value:e,onChange:a,data:o,onFilter:i}){let n=(0,s.usePathname)();return(0,r.jsx)("input",{type:"text",placeholder:"Search...",value:e,onChange:e=>{let r,s,l,d=e.target.value;a(d),r=d.toLowerCase(),l=(s=Object.keys(t).find(e=>n.includes(e)))?t[s]:()=>!1,i(o.filter(e=>l(e,r)))},className:"border border-primary-200 dark:border-secondary-800 p-2 rounded w-1/3 bg-primary-50 dark:bg-secondary-700 text-primary-900 dark:text-secondary-50"})}e.s(["default",()=>a])},41589,e=>{"use strict";var r=e.i(43476),s=e.i(71645),t=e.i(14044),a=e.i(77957);function o({msg:e,onDelete:s}){var t,o;let i,n="text-sm opacity-80 tracking-wide leading-snug";return(0,r.jsxs)("section",{className:"grid gap-3 p-6 w-full h-full bg-white dark:bg-secondary-800 text-primary-900 dark:text-secondary-50 border border-primary-200 dark:border-secondary-700 rounded-md cursor-pointer hover:shadow-md hover:ring-1 hover:ring-primary-300 dark:hover:ring-offset-2 hover:ring-offset-2 transition-shadow",children:[(0,r.jsx)("div",{className:`h-2 w-full rounded ${(t=e.reason,o=e.budget,(i=t.toLowerCase()).includes("issue")?"bg-red-600":i.includes("job")&&o?({under_3000:"bg-red-500","3000_4500":"bg-orange-500","4500_6000":"bg-yellow-500","6000_8000":"bg-green-500","8000_plus":"bg-blue-500"})[o]||"bg-primary-300 dark:bg-secondary-600":"bg-green-500")}`}),(0,r.jsxs)("div",{className:"grid grid-cols-[1fr_auto] items-start gap-2",children:[(0,r.jsx)("h2",{className:"text-lg font-bold tracking-tight",children:e.reason}),(0,r.jsx)(a.default,{variant:"ghost",size:"sm",onClick:r=>{r.stopPropagation(),s(e._id)},className:"p-2 text-sm",children:"Delete"})]}),(0,r.jsxs)("p",{className:n,children:[(0,r.jsx)("strong",{children:"From:"})," ",e.userName," (",e.userEmail,")"]}),(0,r.jsxs)("p",{className:n,children:[(0,r.jsx)("strong",{children:"Message:"})," ",e.message]}),e.message.startsWith("http")&&(0,r.jsx)("a",{href:e.message,target:"_blank",rel:"noopener noreferrer",className:"text-primary-700 dark:text-secondary-200 underline",children:"View Attachment"}),e.budget&&(0,r.jsxs)("p",{className:n,children:[(0,r.jsx)("strong",{children:"Budget:"})," ",e.budget]}),(0,r.jsx)("p",{className:"text-xs opacity-60",children:new Date(e.createdAt).toLocaleString()})]})}function i(){let[e,a]=(0,s.useState)([]),[i,n]=(0,s.useState)([]),[l,d]=(0,s.useState)(""),[c,g]=(0,s.useState)(!1),u=(0,s.useCallback)(async e=>{g(!0);try{let r=await fetch("/api/messages",{signal:e});if(!r.ok)throw Error("Failed to fetch messages");let s=(await r.json()).messages.sort((e,r)=>new Date(r.createdAt).getTime()-new Date(e.createdAt).getTime());a(s),n(s)}catch(e){e instanceof Error&&"AbortError"!==e.name&&console.error("Error fetching messages:",e)}finally{g(!1)}},[]);(0,s.useEffect)(()=>{let e=new AbortController;return u(e.signal),()=>e.abort()},[u]);let m=async e=>{if(confirm("Are you sure you want to delete this message?"))try{if(!(await fetch(`/api/messages/${e}`,{method:"DELETE"})).ok)throw Error("Failed to delete message");a(r=>r.filter(r=>r._id!==e)),n(r=>r.filter(r=>r._id!==e))}catch(e){console.error("Error deleting message:",e)}};return c?(0,r.jsx)("p",{children:"Loading..."}):(0,r.jsxs)("div",{className:"grid gap-6 p-6 text-primary-900 dark:text-secondary-50",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold",children:"Messages"}),(0,r.jsx)(t.default,{value:l,onChange:d,data:e,onFilter:n}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(e=>(0,r.jsx)(o,{msg:e,onDelete:m},e._id))})]})}e.s(["default",()=>i])}]);