{"version":3,"sources":["../../../../../../apps/dashboard/src/app/dashboard/page.tsx"],"sourcesContent":["//src/app/dashboard/page.tsx\n\n'use client';\n\nimport { useState, useEffect } from 'react';\nimport Button from '@portfolio/ui/components/Button/Button';\n\ntype StatType = {\n  users: number;\n  onlineUsers: number;\n  messages: number;\n  projects: number;\n  experiences: number;\n};\n\nexport default function Dashboard() {\n  const [stats, setStats] = useState<StatType>({\n    users: 0,\n    onlineUsers: 0,\n    messages: 0,\n    projects: 0,\n    experiences: 0,\n  });\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const fetchStats = async () => {\n    setLoading(true);\n    setError(null);\n\n    try {\n      const endpoints = ['users', 'messages', 'projects', 'experiences'];\n      const responses = await Promise.all(\n        endpoints.map((endpoint) => fetch(`/api/${endpoint}`))\n      );\n\n      if (responses.some((res) => !res.ok)) {\n        throw new Error('One or more API calls failed');\n      }\n\n      const data = await Promise.all(responses.map((res) => res.json()));\n\n      setStats({\n        users: data[0]?.users?.length || 0,\n        onlineUsers: data[0]?.onlineUsers || 0,\n        messages: data[1]?.messages?.length || 0,\n        projects: data[2]?.projects?.length || 0,\n        experiences: data[3]?.experiences?.length || 0,\n      });\n    } catch (err) {\n      console.error('Dashboard fetch error:', err);\n      setError('Failed to fetch stats. Try again later.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchStats();\n  }, []);\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2\">\n        <div>\n          <h1 className=\"text-3xl font-bold\">Dashboard Overview</h1>\n          <p className=\"text-muted-foreground text-sm\">\n            View system stats and refresh data as needed.\n          </p>\n        </div>\n        <Button onClick={fetchStats} disabled={loading}>\n          {loading ? 'Refreshing...' : 'Refresh Stats'}\n        </Button>\n      </div>\n\n      {error && <p className=\"text-red-600 dark:text-red-400\">{error}</p>}\n\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4\">\n        <StatCard\n          title=\"Users Online\"\n          value={`${stats.onlineUsers}/${stats.users}`}\n          subtext=\"Online / Total\"\n          highlight\n        />\n        <StatCard title=\"Messages\" value={stats.messages} />\n        <StatCard title=\"Projects\" value={stats.projects} />\n        <StatCard title=\"Experiences\" value={stats.experiences} />\n      </div>\n    </div>\n  );\n}\n\nconst StatCard = ({\n  title,\n  value,\n  subtext,\n  highlight = false,\n}: {\n  title: string;\n  value: number | string;\n  subtext?: string;\n  highlight?: boolean;\n}) => (\n  <div className=\"bg-primary-50 dark:bg-secondary-800 border border-primary-200 dark:border-secondary-700 rounded-xl p-4 shadow-sm flex flex-col gap-1\">\n    <span className=\"text-sm font-medium text-muted-foreground\">{title}</span>\n    <span\n      className={`text-3xl font-bold ${\n        highlight ? 'text-green-600 dark:text-green-400' : ''\n      }`}\n    >\n      {value}\n    </span>\n    {subtext && (\n      <span className=\"text-xs text-muted-foreground\">{subtext}</span>\n    )}\n  </div>\n);\n"],"names":[],"mappings":"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"}