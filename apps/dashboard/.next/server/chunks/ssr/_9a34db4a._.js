module.exports=[25551,a=>{"use strict";var b=a.i(87924),c=a.i(50944);let d={"/users":(a,b)=>{let{name:c,email:d,roles:e}=a;return c?.toLowerCase().includes(b)||d?.toLowerCase().includes(b)||e?.some(a=>a.toLowerCase().includes(b))},"/projects":(a,b)=>{let{name:c,description:d,tags:e}=a;return c?.toLowerCase().includes(b)||d?.toLowerCase().includes(b)||e?.some(a=>a.toLowerCase().includes(b))},"/messages":(a,b)=>{let{userName:c,userEmail:d,message:e,reason:f}=a;return c?.toLowerCase().includes(b)||d?.toLowerCase().includes(b)||e?.toLowerCase().includes(b)||f?.toLowerCase().includes(b)},"/experiences":(a,b)=>{let{title:c,location:d,tags:e}=a;return c?.toLowerCase().includes(b)||d?.toLowerCase().includes(b)||e?.some(a=>a.toLowerCase().includes(b))}};function e({value:a,onChange:e,data:f,onFilter:g}){let h=(0,c.usePathname)();return(0,b.jsx)("input",{type:"text",placeholder:"Search...",value:a,onChange:a=>{let b,c,i,j=a.target.value;e(j),b=j.toLowerCase(),i=(c=Object.keys(d).find(a=>h.includes(a)))?d[c]:()=>!1,g(f.filter(a=>i(a,b)))},className:"border border-primary-200 dark:border-secondary-800 p-2 rounded w-1/3 bg-primary-50 dark:bg-secondary-700 text-primary-900 dark:text-secondary-50"})}a.s(["default",()=>e])},89465,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(25551),e=a.i(96846);function f({msg:a,onDelete:c}){var d,f;let g,h="text-sm opacity-80 tracking-wide leading-snug";return(0,b.jsxs)("section",{className:"grid gap-3 p-6 w-full h-full bg-white dark:bg-secondary-800 text-primary-900 dark:text-secondary-50 border border-primary-200 dark:border-secondary-700 rounded-md cursor-pointer hover:shadow-md hover:ring-1 hover:ring-primary-300 dark:hover:ring-offset-2 hover:ring-offset-2 transition-shadow",children:[(0,b.jsx)("div",{className:`h-2 w-full rounded ${(d=a.reason,f=a.budget,(g=d.toLowerCase()).includes("issue")?"bg-red-600":g.includes("job")&&f?({under_3000:"bg-red-500","3000_4500":"bg-orange-500","4500_6000":"bg-yellow-500","6000_8000":"bg-green-500","8000_plus":"bg-blue-500"})[f]||"bg-primary-300 dark:bg-secondary-600":"bg-green-500")}`}),(0,b.jsxs)("div",{className:"grid grid-cols-[1fr_auto] items-start gap-2",children:[(0,b.jsx)("h2",{className:"text-lg font-bold tracking-tight",children:a.reason}),(0,b.jsx)(e.default,{variant:"ghost",size:"sm",onClick:b=>{b.stopPropagation(),c(a._id)},className:"p-2 text-sm",children:"Delete"})]}),(0,b.jsxs)("p",{className:h,children:[(0,b.jsx)("strong",{children:"From:"})," ",a.userName," (",a.userEmail,")"]}),(0,b.jsxs)("p",{className:h,children:[(0,b.jsx)("strong",{children:"Message:"})," ",a.message]}),a.message.startsWith("http")&&(0,b.jsx)("a",{href:a.message,target:"_blank",rel:"noopener noreferrer",className:"text-primary-700 dark:text-secondary-200 underline",children:"View Attachment"}),a.budget&&(0,b.jsxs)("p",{className:h,children:[(0,b.jsx)("strong",{children:"Budget:"})," ",a.budget]}),(0,b.jsx)("p",{className:"text-xs opacity-60",children:new Date(a.createdAt).toLocaleString()})]})}function g(){let[a,e]=(0,c.useState)([]),[g,h]=(0,c.useState)([]),[i,j]=(0,c.useState)(""),[k,l]=(0,c.useState)(!1),m=(0,c.useCallback)(async a=>{l(!0);try{let b=await fetch("/api/messages",{signal:a});if(!b.ok)throw Error("Failed to fetch messages");let c=(await b.json()).messages.sort((a,b)=>new Date(b.createdAt).getTime()-new Date(a.createdAt).getTime());e(c),h(c)}catch(a){a instanceof Error&&"AbortError"!==a.name&&console.error("Error fetching messages:",a)}finally{l(!1)}},[]);(0,c.useEffect)(()=>{let a=new AbortController;return m(a.signal),()=>a.abort()},[m]);let n=async a=>{if(confirm("Are you sure you want to delete this message?"))try{if(!(await fetch(`/api/messages/${a}`,{method:"DELETE"})).ok)throw Error("Failed to delete message");e(b=>b.filter(b=>b._id!==a)),h(b=>b.filter(b=>b._id!==a))}catch(a){console.error("Error deleting message:",a)}};return k?(0,b.jsx)("p",{children:"Loading..."}):(0,b.jsxs)("div",{className:"grid gap-6 p-6 text-primary-900 dark:text-secondary-50",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Messages"}),(0,b.jsx)(d.default,{value:i,onChange:j,data:a,onFilter:h}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:g.map(a=>(0,b.jsx)(f,{msg:a,onDelete:n},a._id))})]})}a.s(["default",()=>g])}];

//# sourceMappingURL=_9a34db4a._.js.map