module.exports=[25551,a=>{"use strict";var b=a.i(87924),c=a.i(50944);let d={"/users":(a,b)=>{let{name:c,email:d,roles:e}=a;return c?.toLowerCase().includes(b)||d?.toLowerCase().includes(b)||e?.some(a=>a.toLowerCase().includes(b))},"/projects":(a,b)=>{let{name:c,description:d,tags:e}=a;return c?.toLowerCase().includes(b)||d?.toLowerCase().includes(b)||e?.some(a=>a.toLowerCase().includes(b))},"/messages":(a,b)=>{let{userName:c,userEmail:d,message:e,reason:f}=a;return c?.toLowerCase().includes(b)||d?.toLowerCase().includes(b)||e?.toLowerCase().includes(b)||f?.toLowerCase().includes(b)},"/experiences":(a,b)=>{let{title:c,location:d,tags:e}=a;return c?.toLowerCase().includes(b)||d?.toLowerCase().includes(b)||e?.some(a=>a.toLowerCase().includes(b))}};function e({value:a,onChange:e,data:f,onFilter:g}){let h=(0,c.usePathname)();return(0,b.jsx)("input",{type:"text",placeholder:"Search...",value:a,onChange:a=>{let b,c,i,j=a.target.value;e(j),b=j.toLowerCase(),i=(c=Object.keys(d).find(a=>h.includes(a)))?d[c]:()=>!1,g(f.filter(a=>i(a,b)))},className:"border border-primary-200 dark:border-secondary-800 p-2 rounded w-1/3 bg-primary-50 dark:bg-secondary-700 text-primary-900 dark:text-secondary-50"})}a.s(["default",()=>e])},34543,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(96846);function e({user:a,isOpen:e,onClose:f,onSave:g}){let[h,i]=(0,c.useState)({name:"",email:"",password:"",roles:[],createdAt:"",updatedAt:"",loading:!1,error:""});(0,c.useEffect)(()=>{a&&i({name:a.name,email:a.email,password:a.password,roles:a.roles,createdAt:new Date(a.createdAt).toLocaleString(),updatedAt:new Date(a.updatedAt).toLocaleString(),loading:!1,error:""})},[a]);let j=a=>{let{name:b,value:c}=a.target;i(a=>({...a,[b]:"roles"===b?c.split(",").map(a=>a.trim()):c}))},k=(0,c.useCallback)(async b=>{if(b.preventDefault(),!a)return;i(a=>({...a,loading:!0,error:""}));let c={...a,name:h.name,email:h.email,password:h.password,roles:h.roles};try{let b=await fetch(`/api/users/${a._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});if(b.ok){let a=await b.json();g(a.user),f()}else{let a=await b.json();i(b=>({...b,error:a.error||"Failed to update user",loading:!1}))}}catch(a){console.error("Error updating user:",a),i(a=>({...a,error:"Server error. Please try again.",loading:!1}))}},[h,a,g,f]);return e?(0,b.jsx)("div",{className:"fixed inset-0 bg-primary-900/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:(0,b.jsxs)("div",{className:"bg-primary-50 dark:bg-primary-900 text-primary-900 dark:text-secondary-50 p-6 rounded-lg max-w-lg w-full grid gap-4 border border-primary-200 dark:border-secondary-700 shadow-lg",children:[(0,b.jsx)("h2",{className:"text-xl font-bold",children:"Edit User"}),h.error&&(0,b.jsx)("p",{className:"text-primary-900 dark:text-secondary-50 bg-primary-100 dark:bg-secondary-800 p-2 rounded",children:h.error}),(0,b.jsxs)("form",{onSubmit:k,className:"grid gap-4",children:[["name","email","password","roles","createdAt","updatedAt"].map(a=>(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)("label",{className:"text-sm font-semibold text-primary-900 dark:text-secondary-50",children:"roles"===a?"Roles (comma-separated)":"createdAt"===a?"Created At":"updatedAt"===a?"Updated At":a.charAt(0).toUpperCase()+a.slice(1)}),(0,b.jsx)("input",{type:"email"===a?"email":"password"===a?"password":"text",name:a,className:"w-full p-2 border rounded border-primary-200 dark:border-secondary-800 bg-primary-100 dark:bg-secondary-700 text-primary-900 dark:text-secondary-50",value:"roles"===a?h.roles.join(", "):h[a],onChange:j,disabled:"createdAt"===a||"updatedAt"===a,required:["name","email","password","roles"].includes(a)})]},a)),(0,b.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,b.jsx)(d.default,{type:"button",onClick:f,disabled:h.loading,variant:"ghost",size:"sm",children:"Cancel"}),(0,b.jsx)(d.default,{type:"submit",disabled:h.loading,variant:"secondary",size:"sm",children:h.loading?"Saving...":"Save"})]})]})]})}):null}let f=({isOpen:a,onClose:e,onSave:f})=>{let[g,h]=(0,c.useState)(""),[i,j]=(0,c.useState)(""),[k,l]=(0,c.useState)(""),[m,n]=(0,c.useState)(""),[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)(""),s=()=>{h(""),j(""),l(""),n(""),r("")},t=async()=>{if(!g||!i||!k)return void r("All fields are required.");let a=m.split(",").map(a=>a.trim());p(!0);try{await f({name:g,email:i,password:k,roles:a}),s(),e()}catch(a){console.error(a),r("Failed to create user.")}finally{p(!1)}};return a?(0,b.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-primary-900/50 z-50",children:(0,b.jsxs)("div",{className:"bg-primary-50 dark:bg-primary-900 text-primary-900 dark:text-secondary-50 p-4 rounded w-full max-w-md shadow-lg border border-primary-200 dark:border-secondary-700",children:[(0,b.jsx)("h2",{className:"text-xl mb-4 font-semibold",children:"Add New User"}),q&&(0,b.jsx)("p",{className:"text-red-600 mb-2",children:q}),(0,b.jsx)("label",{className:"block mb-2",children:"Name"}),(0,b.jsx)("input",{type:"text",value:g,onChange:a=>h(a.target.value),className:"w-full p-2 border border-primary-200 dark:border-secondary-800 rounded mb-4 bg-primary-50 dark:bg-secondary-700 text-primary-900 dark:text-secondary-50"}),(0,b.jsx)("label",{className:"block mb-2",children:"Email"}),(0,b.jsx)("input",{type:"email",value:i,onChange:a=>j(a.target.value),className:"w-full p-2 border border-primary-200 dark:border-secondary-800 rounded mb-4 bg-primary-50 dark:bg-secondary-700 text-primary-900 dark:text-secondary-50"}),(0,b.jsx)("label",{className:"block mb-2",children:"Password"}),(0,b.jsx)("input",{type:"password",value:k,onChange:a=>l(a.target.value),className:"w-full p-2 border border-primary-200 dark:border-secondary-800 rounded mb-4 bg-primary-50 dark:bg-secondary-700 text-primary-900 dark:text-secondary-50"}),(0,b.jsx)("label",{className:"block mb-2",children:"Roles (comma separated)"}),(0,b.jsx)("input",{type:"text",value:m,onChange:a=>n(a.target.value),className:"w-full p-2 border border-primary-200 dark:border-secondary-800 rounded mb-4 bg-primary-50 dark:bg-secondary-700 text-primary-900 dark:text-secondary-50"}),(0,b.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,b.jsx)(d.default,{onClick:t,disabled:o,variant:"secondary",size:"sm",children:o?"Saving...":"Save"}),(0,b.jsx)(d.default,{onClick:()=>{s(),e()},variant:"ghost",size:"sm",children:"Cancel"})]})]})}):null};var g=a.i(25551);function h(){let[a,h]=(0,c.useState)([]),[i,j]=(0,c.useState)(""),[k,l]=(0,c.useState)([]),[m,n]=(0,c.useState)(null),[o,p]=(0,c.useState)(!1),q=(0,c.useCallback)(async()=>{try{let a=await fetch("/api/users");if(!a.ok)throw Error("Failed to fetch users");let{users:b}=await a.json();h(b),l(b)}catch(a){console.error(a)}},[]);(0,c.useEffect)(()=>{q()},[q]);let r=async b=>{if(confirm("Are you sure you want to delete this user?"))try{if(!(await fetch(`/api/users/${b}`,{method:"DELETE"})).ok)throw Error("Failed to delete user");let c=a.filter(a=>a._id!==b);h(c),l(c)}catch(a){console.error(a)}},s=async a=>{try{let b=await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!b.ok){let a=await b.json();throw Error(a.error||"Failed to add user")}await q(),p(!1)}catch(a){console.error("Error creating user:",a)}};return(0,b.jsxs)("div",{className:"space-y-6 p-4 text-primary-900 dark:text-secondary-50",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold",children:"Manage Users"}),(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)(g.default,{value:i,onChange:j,data:a,onFilter:a=>l(a)}),(0,b.jsx)(d.default,{onClick:()=>p(!0),variant:"secondary",size:"sm",children:"Add User"})]}),(0,b.jsx)("div",{className:"overflow-x-auto border border-primary-200 dark:border-secondary-700 rounded",children:(0,b.jsxs)("table",{className:"w-full border-collapse",children:[(0,b.jsx)("thead",{className:"bg-primary-200 text-primary-900 dark:bg-secondary-700 dark:text-secondary-50",children:(0,b.jsx)("tr",{className:"text-left",children:["Name","Email","Roles","Created At","Updated At","Status","Actions"].map(a=>(0,b.jsx)("th",{className:"border border-primary-200 dark:border-secondary-700 p-3",children:a},a))})}),(0,b.jsx)("tbody",{className:"dark:bg-secondary-800",children:k.map((a,c)=>(0,b.jsxs)("tr",{className:`${c%2==0?"bg-primary-50 dark:bg-secondary-900":"bg-primary-100 dark:bg-secondary-800"} hover:bg-primary-200 dark:hover:bg-secondary-700`,children:[(0,b.jsx)("td",{className:"border border-primary-200 dark:border-secondary-700 p-3",children:a.name}),(0,b.jsx)("td",{className:"border border-primary-200 dark:border-secondary-700 p-3",children:a.email}),(0,b.jsx)("td",{className:"border border-primary-200 dark:border-secondary-700 p-3",children:a.roles.join(", ")}),(0,b.jsx)("td",{className:"border border-primary-200 dark:border-secondary-700 p-3",children:new Date(a.createdAt).toLocaleString()}),(0,b.jsx)("td",{className:"border border-primary-200 dark:border-secondary-700 p-3",children:new Date(a.updatedAt).toLocaleString()}),(0,b.jsx)("td",{className:"border border-primary-200 dark:border-secondary-700 p-3",children:(0,b.jsx)("span",{className:a.isOnline?"text-green-600":"text-gray-500",children:a.isOnline?"Online":"Offline"})}),(0,b.jsxs)("td",{className:"grid gap-2 border border-primary-200 dark:border-secondary-700 p-3 text-center",children:[(0,b.jsx)(d.default,{onClick:()=>n(a),variant:"ghost",size:"sm",className:"text-primary-900 hover:text-primary-700 dark:text-secondary-50 dark:hover:text-secondary-200",children:"Edit"}),(0,b.jsx)(d.default,{onClick:()=>r(a._id),variant:"danger",size:"sm",children:"Delete"})]})]},a._id))})]})}),m&&(0,b.jsx)(e,{user:m,isOpen:!!m,onClose:()=>n(null),onSave:q}),o&&(0,b.jsx)(f,{isOpen:o,onClose:()=>p(!1),onSave:s})]})}a.s(["default",()=>h],34543)}];

//# sourceMappingURL=_51c893ed._.js.map