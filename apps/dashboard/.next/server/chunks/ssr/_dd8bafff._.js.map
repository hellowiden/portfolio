{"version":3,"sources":["../../../../../../packages/ui/src/components/SearchInput/SearchInput.tsx","../../../../../../apps/dashboard/src/app/dashboard/experiences/page.tsx"],"sourcesContent":["//src/app/components/SearchInput/SearchInput.tsx\n\n'use client';\n\nimport { usePathname } from 'next/navigation';\n\ninterface User {\n  name: string;\n  email: string;\n  roles: string[];\n}\n\ninterface Project {\n  name: string;\n  description?: string;\n  tags?: string[];\n}\n\ninterface Message {\n  userName: string;\n  userEmail: string;\n  message: string;\n  reason: string;\n}\n\ninterface Experience {\n  title: string;\n  location: string;\n  tags: string[];\n  type: string;\n}\n\ntype SearchData = User | Project | Message | Experience;\n\ninterface SearchInputProps<T extends SearchData> {\n  value: string;\n  onChange: (value: string) => void;\n  data: T[];\n  onFilter: (filtered: T[]) => void;\n}\n\nconst filters = {\n  '/users': (item: SearchData, q: string) => {\n    const { name, email, roles } = item as User;\n    return (\n      name?.toLowerCase().includes(q) ||\n      email?.toLowerCase().includes(q) ||\n      roles?.some((r) => r.toLowerCase().includes(q))\n    );\n  },\n  '/projects': (item: SearchData, q: string) => {\n    const { name, description, tags } = item as Project;\n    return (\n      name?.toLowerCase().includes(q) ||\n      description?.toLowerCase().includes(q) ||\n      tags?.some((t) => t.toLowerCase().includes(q))\n    );\n  },\n  '/messages': (item: SearchData, q: string) => {\n    const { userName, userEmail, message, reason } = item as Message;\n    return (\n      userName?.toLowerCase().includes(q) ||\n      userEmail?.toLowerCase().includes(q) ||\n      message?.toLowerCase().includes(q) ||\n      reason?.toLowerCase().includes(q)\n    );\n  },\n  '/experiences': (item: SearchData, q: string) => {\n    const { title, location, tags } = item as Experience;\n    return (\n      title?.toLowerCase().includes(q) ||\n      location?.toLowerCase().includes(q) ||\n      tags?.some((t) => t.toLowerCase().includes(q))\n    );\n  },\n};\n\nexport default function SearchInput<T extends SearchData>({\n  value,\n  onChange,\n  data,\n  onFilter,\n}: SearchInputProps<T>) {\n  const pathname = usePathname();\n\n  const filterData = (query: string) => {\n    const q = query.toLowerCase();\n    const filterKeys = Object.keys(filters) as Array<keyof typeof filters>;\n    const match = filterKeys.find((key) => pathname.includes(key));\n    const filterFn = match ? filters[match] : () => false;\n    onFilter(data.filter((item) => filterFn(item, q)));\n  };\n\n  return (\n    <input\n      type=\"text\"\n      placeholder=\"Search...\"\n      value={value}\n      onChange={(e) => {\n        const query = e.target.value;\n        onChange(query);\n        filterData(query);\n      }}\n      className=\"border border-primary-200 dark:border-secondary-800 p-2 rounded w-1/3 bg-primary-50 dark:bg-secondary-700 text-primary-900 dark:text-secondary-50\"\n    />\n  );\n}\n","// src/app/dashboard/experiences/page.tsx\n\n'use client';\n\nimport { useEffect, useState, useCallback } from 'react';\nimport SearchInput from '@portfolio/ui/components/SearchInput/SearchInput';\nimport Button from '@portfolio/ui/components/Button/Button';\n\ninterface Experience {\n  _id: string;\n  title: string;\n  location: string;\n  date: string;\n  description: string;\n  image: string;\n  tags: string[];\n  type: 'work' | 'education';\n}\n\nconst emptyExperience: Partial<Experience> = {\n  title: '',\n  location: '',\n  date: '',\n  description: '',\n  image: '',\n  tags: [],\n  type: 'work',\n};\n\nexport default function ExperiencesDashboard() {\n  const [experiences, setExperiences] = useState<Experience[]>([]);\n  const [filteredExperiences, setFilteredExperiences] = useState<Experience[]>(\n    []\n  );\n  const [searchQuery, setSearchQuery] = useState('');\n  const [formData, setFormData] =\n    useState<Partial<Experience>>(emptyExperience);\n  const [editingExpId, setEditingExpId] = useState<string | null>(null);\n\n  const fetchExperiences = useCallback(async () => {\n    try {\n      const res = await fetch('/api/experiences');\n      if (!res.ok) throw new Error('Error fetching experiences');\n      const data = await res.json();\n      setExperiences(data.experiences);\n      setFilteredExperiences(data.experiences);\n    } catch (err) {\n      console.error(err);\n    }\n  }, []);\n\n  useEffect(() => {\n    fetchExperiences();\n  }, [fetchExperiences]);\n\n  const resetForm = () => {\n    setFormData(emptyExperience);\n    setEditingExpId(null);\n  };\n\n  const handleChange = (\n    e: React.ChangeEvent<\n      HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement\n    >\n  ) => {\n    const { name, value } = e.target;\n    setFormData((prev) => ({\n      ...prev,\n      [name]:\n        name === 'tags' ? value.split(',').map((tag) => tag.trim()) : value,\n    }));\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!formData.title) {\n      alert('Title is required.');\n      return;\n    }\n\n    try {\n      const res = await fetch(\n        editingExpId ? `/api/experiences/${editingExpId}` : '/api/experiences',\n        {\n          method: editingExpId ? 'PUT' : 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify(formData),\n        }\n      );\n      if (!res.ok) throw new Error('Error saving experience');\n      resetForm();\n      await fetchExperiences();\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  const handleEdit = (exp: Experience) => {\n    setEditingExpId(exp._id);\n    setFormData(exp);\n  };\n\n  const handleDelete = async (id: string) => {\n    if (!confirm('Delete this experience?')) return;\n    try {\n      const res = await fetch(`/api/experiences/${id}`, { method: 'DELETE' });\n      if (!res.ok) throw new Error('Error deleting experience');\n      await fetchExperiences();\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  const inputClass =\n    'border border-primary-200 bg-primary-50 text-primary-900 rounded p-1 w-full dark:border-secondary-700 dark:bg-secondary-900 dark:text-secondary-50';\n\n  const cellClass = 'p-2 border border-primary-200 dark:border-secondary-700';\n\n  return (\n    <div className=\"grid gap-6 p-4 text-primary-900 dark:text-secondary-50\">\n      <h1 className=\"text-2xl font-bold\">Manage Experiences</h1>\n\n      <SearchInput\n        value={searchQuery}\n        onChange={setSearchQuery}\n        data={experiences}\n        onFilter={setFilteredExperiences}\n      />\n\n      <form\n        onSubmit={handleSubmit}\n        className=\"grid gap-2 border border-primary-200 dark:border-secondary-700 p-4 rounded bg-primary-100 dark:bg-secondary-800\"\n      >\n        {(\n          [\n            { label: 'Title', name: 'title' },\n            { label: 'Location', name: 'location' },\n            { label: 'Date', name: 'date' },\n            { label: 'Image URL', name: 'image' },\n            { label: 'Tags (comma separated)', name: 'tags' },\n          ] as const\n        ).map(({ label, name }) => (\n          <label key={name}>\n            {label}:\n            <input\n              className={inputClass}\n              type=\"text\"\n              name={name}\n              value={\n                Array.isArray(formData[name])\n                  ? (formData[name] as string[]).join(', ')\n                  : formData[name] ?? ''\n              }\n              onChange={handleChange}\n            />\n          </label>\n        ))}\n\n        <label>\n          Description:\n          <textarea\n            className={inputClass}\n            name=\"description\"\n            rows={3}\n            value={formData.description || ''}\n            onChange={handleChange}\n          />\n        </label>\n\n        <label>\n          Type:\n          <select\n            className={inputClass}\n            name=\"type\"\n            value={formData.type}\n            onChange={handleChange}\n          >\n            <option value=\"work\">Work</option>\n            <option value=\"education\">Education</option>\n          </select>\n        </label>\n\n        <Button type=\"submit\" variant=\"primary\" size=\"md\">\n          {editingExpId ? 'Update Experience' : 'Create Experience'}\n        </Button>\n      </form>\n\n      <table className=\"w-full border border-primary-200 dark:border-secondary-700\">\n        <thead className=\"bg-primary-200 dark:bg-secondary-700 text-primary-900 dark:text-secondary-50\">\n          <tr>\n            {['Title', 'Location', 'Date', 'Actions'].map((col) => (\n              <th key={col} className={cellClass}>\n                {col}\n              </th>\n            ))}\n          </tr>\n        </thead>\n        <tbody>\n          {filteredExperiences.map((exp) => (\n            <tr\n              key={exp._id}\n              className=\"border-b border-primary-200 dark:border-secondary-700\"\n            >\n              <td className={cellClass}>{exp.title}</td>\n              <td className={cellClass}>{exp.location}</td>\n              <td className={cellClass}>{exp.date}</td>\n              <td className={cellClass}>\n                <div className=\"grid grid-cols-2 gap-2\">\n                  <Button\n                    onClick={() => handleEdit(exp)}\n                    variant=\"ghost\"\n                    size=\"sm\"\n                  >\n                    Edit\n                  </Button>\n                  <Button\n                    onClick={() => handleDelete(exp._id)}\n                    variant=\"danger\"\n                    size=\"sm\"\n                  >\n                    Remove\n                  </Button>\n                </div>\n              </td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    </div>\n  );\n}\n"],"names":[],"mappings":"wDAIA,EAAA,EAAA,CAAA,CAAA,OAqCA,IAAM,EAAU,CACd,SAAU,CAAC,EAAkB,KAC3B,GAAM,MAAE,CAAI,OAAE,CAAK,OAAE,CAAK,CAAE,CAAG,EAC/B,OACE,GAAM,cAAc,SAAS,IAC7B,GAAO,cAAc,SAAS,IAC9B,GAAO,KAAK,AAAC,GAAM,EAAE,WAAW,GAAG,QAAQ,CAAC,GAEhD,EACA,YAAa,CAAC,EAAkB,KAC9B,GAAM,MAAE,CAAI,aAAE,CAAW,MAAE,CAAI,CAAE,CAAG,EACpC,OACE,GAAM,cAAc,SAAS,IAC7B,GAAa,cAAc,SAAS,IACpC,GAAM,KAAK,AAAC,GAAM,EAAE,WAAW,GAAG,QAAQ,CAAC,GAE/C,EACA,YAAa,CAAC,EAAkB,KAC9B,GAAM,UAAE,CAAQ,WAAE,CAAS,CAAE,SAAO,QAAE,CAAM,CAAE,CAAG,EACjD,OACE,GAAU,cAAc,SAAS,IACjC,GAAW,cAAc,SAAS,IAClC,GAAS,cAAc,SAAS,IAChC,GAAQ,cAAc,SAAS,EAEnC,EACA,eAAgB,CAAC,EAAkB,KACjC,GAAM,CAAE,OAAK,UAAE,CAAQ,MAAE,CAAI,CAAE,CAAG,EAClC,OACE,GAAO,cAAc,SAAS,IAC9B,GAAU,cAAc,SAAS,IACjC,GAAM,KAAK,AAAC,GAAM,EAAE,WAAW,GAAG,QAAQ,CAAC,GAE/C,CACF,EAEe,SAAS,EAAkC,OACxD,CAAK,UACL,CAAQ,MACR,CAAI,UACJ,CAAQ,CACY,EACpB,IAAM,EAAW,CAAA,EAAA,EAAA,WAAW,AAAX,IAUjB,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,OACL,YAAY,YACZ,MAAO,EACP,SAAU,AAAC,IACT,UAAM,EAAQ,EAAE,MAAM,CAAC,KAAK,CAC5B,EAAS,GAdP,EAAI,AAeK,EAfC,WAAW,GAGrB,EAAW,CADX,EADa,AACL,OADY,IAAI,CAAC,GACN,IAAI,CAAC,AAAC,GAAQ,EAAS,QAAQ,CAAC,KAChC,CAAO,CAAC,EAAM,CAAG,KAAM,EAChD,EAAS,EAAK,MAAM,CAAC,AAAC,GAAS,EAAS,EAAM,IAY5C,EACA,UAAU,qJAGhB,iECtGA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAaA,IAAM,EAAuC,CAC3C,MAAO,GACP,SAAU,GACV,KAAM,GACN,YAAa,GACb,MAAO,GACP,KAAM,EAAE,CACR,KAAM,MACR,EAEe,SAAS,IACtB,GAAM,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAe,EAAE,EACzD,CAAC,EAAqB,EAAuB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAC5D,EAAE,EAEE,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACzC,CAAC,EAAU,EAAY,CAC3B,CAAA,EAAA,EAAA,QAAQ,AAAR,EAA8B,GAC1B,CAAC,EAAc,EAAgB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MAE1D,EAAmB,CAAA,EAAA,EAAA,WAAA,AAAW,EAAC,UACnC,GAAI,CACF,IAAM,EAAM,MAAM,MAAM,oBACxB,GAAI,CAAC,EAAI,EAAE,CAAE,MAAM,AAAI,MAAM,8BAC7B,IAAM,EAAO,MAAM,EAAI,IAAI,GAC3B,EAAe,EAAK,WAAW,EAC/B,EAAuB,EAAK,WAAW,CACzC,CAAE,MAAO,EAAK,CACZ,QAAQ,KAAK,CAAC,EAChB,CACF,EAAG,EAAE,EAEL,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,GACF,EAAG,CAAC,EAAiB,EAOrB,IAAM,EAAe,AACnB,IAIA,GAAM,MAAE,CAAI,CAAE,OAAK,CAAE,CAAG,EAAE,MAAM,CAChC,EAAY,AAAC,IAAU,CACrB,EADoB,CACjB,CAAI,CACP,CAAC,EAAK,CACK,SAAT,EAAkB,EAAM,KAAK,CAAC,KAAK,GAAG,CAAC,AAAC,GAAQ,EAAI,IAAI,IAAM,EAClE,CAAC,CACH,EAEM,EAAe,MAAO,IAE1B,GADA,EAAE,cAAc,GACZ,CAAC,EAAS,KAAK,CAAE,YACnB,MAAM,sBAIR,GAAI,CASF,GAAI,CAAC,CARO,MAAM,MAChB,EAAe,CAAC,iBAAiB,EAAE,EAAA,CAAc,CAAG,mBACpD,CACE,OAAQ,EAAe,MAAQ,OAC/B,QAAS,CAAE,eAAgB,kBAAmB,EAC9C,KAAM,KAAK,SAAS,CAAC,EACvB,EAAA,EAEO,EAAE,CAAE,MAAM,AAAI,MAAM,2BAjC/B,EAAY,GACZ,EAAgB,MAkCd,MAAM,GACR,CAAE,MAAO,EAAK,CACZ,QAAQ,KAAK,CAAC,EAChB,CACF,EAOM,EAAe,MAAO,IAC1B,GAAK,CAAD,OAAS,2BACb,CADyC,EACrC,CAEF,GAAI,CAAC,CADO,MAAM,MAAM,CAAC,iBAAiB,EAAE,EAAA,CAAI,CAAE,CAAE,OAAQ,QAAS,EAAA,EAC5D,EAAE,CAAE,MAAU,AAAJ,MAAU,4BAC7B,OAAM,GACR,CAAE,MAAO,EAAK,CACZ,QAAQ,KAAK,CAAC,EAChB,CACF,EAEM,EACJ,qJAEI,EAAY,0DAElB,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mEACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,8BAAqB,uBAEnC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAW,CAAA,CACV,MAAO,EACP,SAAU,EACV,KAAM,EACN,SAAU,IAGZ,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CACC,SAAU,EACV,UAAU,4HAGR,CACE,CAAE,MAAO,QAAS,KAAM,OAAQ,EAChC,CAAE,MAAO,WAAY,KAAM,UAAW,EACtC,CAAE,MAAO,OAAQ,KAAM,MAAO,EAC9B,CAAE,MAAO,YAAa,KAAM,OAAQ,EACpC,CAAE,MAAO,yBAA0B,KAAM,MAAO,EACjD,CACD,GAAG,CAAC,CAAC,OAAE,CAAK,MAAE,CAAI,CAAE,GACpB,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,WACE,EAAM,IACP,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,UAAW,EACX,KAAK,OACL,KAAM,EACN,MACE,MAAM,OAAO,CAAC,CAAQ,CAAC,EAAK,EACvB,CAAQ,CAAC,EAAK,CAAc,IAAI,CAAC,MAClC,CAAQ,CAAC,EAAK,EAAI,GAExB,SAAU,MAXF,IAgBd,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,WAAM,eAEL,CAAA,EAAA,EAAA,GAAA,EAAC,WAAA,CACC,UAAW,EACX,KAAK,cACL,KAAM,EACN,MAAO,EAAS,WAAW,EAAI,GAC/B,SAAU,OAId,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,WAAM,QAEL,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACC,UAAW,EACX,KAAK,OACL,MAAO,EAAS,IAAI,CACpB,SAAU,YAEV,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAM,gBAAO,SACrB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAM,qBAAY,oBAI9B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAM,CAAA,CAAC,KAAK,SAAS,QAAQ,UAAU,KAAK,cAC1C,EAAe,oBAAsB,yBAI1C,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,uEACf,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,wFACf,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UACE,CAAC,QAAS,WAAY,OAAQ,UAAU,CAAC,GAAG,CAAC,AAAC,GAC7C,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAa,UAAW,WACtB,GADM,QAMf,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,UACE,EAAoB,GAAG,CAAE,AAAD,GACvB,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAEC,UAAU,kEAEV,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAW,WAAY,EAAI,KAAK,GACpC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAW,WAAY,EAAI,QAAQ,GACvC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAW,WAAY,EAAI,IAAI,GACnC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAW,WACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAM,CAAA,CACL,QAAS,IAAM,CA/G/B,EAAgB,EAAI,GAAG,EACvB,EA8G0C,IAC1B,MA/GJ,EA+GY,QACR,KAAK,cACN,SAGD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAM,CAAA,CACL,QAAS,IAAM,EAAa,EAAI,GAAG,EACnC,QAAQ,SACR,KAAK,cACN,kBAnBA,EAAI,GAAG,UA8B1B"}