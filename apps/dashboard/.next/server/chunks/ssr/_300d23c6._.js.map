{"version":3,"sources":["../../../../../../packages/ui/src/components/SearchInput/SearchInput.tsx","../../../../../../apps/dashboard/src/app/dashboard/projects/page.tsx"],"sourcesContent":["//src/app/components/SearchInput/SearchInput.tsx\n\n'use client';\n\nimport { usePathname } from 'next/navigation';\n\ninterface User {\n  name: string;\n  email: string;\n  roles: string[];\n}\n\ninterface Project {\n  name: string;\n  description?: string;\n  tags?: string[];\n}\n\ninterface Message {\n  userName: string;\n  userEmail: string;\n  message: string;\n  reason: string;\n}\n\ninterface Experience {\n  title: string;\n  location: string;\n  tags: string[];\n  type: string;\n}\n\ntype SearchData = User | Project | Message | Experience;\n\ninterface SearchInputProps<T extends SearchData> {\n  value: string;\n  onChange: (value: string) => void;\n  data: T[];\n  onFilter: (filtered: T[]) => void;\n}\n\nconst filters = {\n  '/users': (item: SearchData, q: string) => {\n    const { name, email, roles } = item as User;\n    return (\n      name?.toLowerCase().includes(q) ||\n      email?.toLowerCase().includes(q) ||\n      roles?.some((r) => r.toLowerCase().includes(q))\n    );\n  },\n  '/projects': (item: SearchData, q: string) => {\n    const { name, description, tags } = item as Project;\n    return (\n      name?.toLowerCase().includes(q) ||\n      description?.toLowerCase().includes(q) ||\n      tags?.some((t) => t.toLowerCase().includes(q))\n    );\n  },\n  '/messages': (item: SearchData, q: string) => {\n    const { userName, userEmail, message, reason } = item as Message;\n    return (\n      userName?.toLowerCase().includes(q) ||\n      userEmail?.toLowerCase().includes(q) ||\n      message?.toLowerCase().includes(q) ||\n      reason?.toLowerCase().includes(q)\n    );\n  },\n  '/experiences': (item: SearchData, q: string) => {\n    const { title, location, tags } = item as Experience;\n    return (\n      title?.toLowerCase().includes(q) ||\n      location?.toLowerCase().includes(q) ||\n      tags?.some((t) => t.toLowerCase().includes(q))\n    );\n  },\n};\n\nexport default function SearchInput<T extends SearchData>({\n  value,\n  onChange,\n  data,\n  onFilter,\n}: SearchInputProps<T>) {\n  const pathname = usePathname();\n\n  const filterData = (query: string) => {\n    const q = query.toLowerCase();\n    const filterKeys = Object.keys(filters) as Array<keyof typeof filters>;\n    const match = filterKeys.find((key) => pathname.includes(key));\n    const filterFn = match ? filters[match] : () => false;\n    onFilter(data.filter((item) => filterFn(item, q)));\n  };\n\n  return (\n    <input\n      type=\"text\"\n      placeholder=\"Search...\"\n      value={value}\n      onChange={(e) => {\n        const query = e.target.value;\n        onChange(query);\n        filterData(query);\n      }}\n      className=\"border border-primary-200 dark:border-secondary-800 p-2 rounded w-1/3 bg-primary-50 dark:bg-secondary-700 text-primary-900 dark:text-secondary-50\"\n    />\n  );\n}\n","// src/app/dashboard/projects/page.tsx\n\n'use client';\n\nimport { useEffect, useState, useCallback } from 'react';\nimport SearchInput from '@portfolio/ui/components/SearchInput/SearchInput';\nimport Button from '@portfolio/ui/components/Button/Button';\n\ninterface Project {\n  _id: string;\n  name: string;\n  link?: string;\n  createdAt: string;\n  completedAt?: string;\n  description?: string;\n  image?: string;\n  tags?: string[];\n}\n\nconst emptyProject: Partial<Project> = {\n  name: '',\n  link: '',\n  createdAt: '',\n  completedAt: '',\n  description: '',\n  image: '',\n  tags: [],\n};\n\nexport default function ProjectsDashboard() {\n  const [projects, setProjects] = useState<Project[]>([]);\n  const [filteredProjects, setFilteredProjects] = useState<Project[]>([]);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [formData, setFormData] = useState<Partial<Project>>(emptyProject);\n  const [editingProjectId, setEditingProjectId] = useState<string | null>(null);\n\n  const fetchProjects = useCallback(async () => {\n    try {\n      const res = await fetch('/api/projects');\n      if (!res.ok) throw new Error('Error fetching projects');\n      const data = await res.json();\n      const sorted = data.projects.sort(\n        (a: Project, b: Project) =>\n          new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()\n      );\n      setProjects(sorted);\n      setFilteredProjects(sorted);\n    } catch (err) {\n      console.error(err);\n    }\n  }, []);\n\n  useEffect(() => {\n    fetchProjects();\n  }, [fetchProjects]);\n\n  const resetForm = () => {\n    setFormData(emptyProject);\n    setEditingProjectId(null);\n  };\n\n  const handleChange = (\n    e: React.ChangeEvent<\n      HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement\n    >\n  ) => {\n    const { name, value } = e.target;\n    setFormData((prev) => ({\n      ...prev,\n      [name]:\n        name === 'tags' ? value.split(',').map((tag) => tag.trim()) : value,\n    }));\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    const { name, createdAt, description } = formData;\n    if (!name || !createdAt || !description) {\n      alert('Name, createdAt, and description are required.');\n      return;\n    }\n\n    try {\n      const res = await fetch(\n        editingProjectId\n          ? `/api/projects/${editingProjectId}`\n          : '/api/projects',\n        {\n          method: editingProjectId ? 'PUT' : 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify(formData),\n        }\n      );\n      if (!res.ok) throw new Error('Error saving project');\n      resetForm();\n      await fetchProjects();\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  const handleEdit = (project: Project) => {\n    setEditingProjectId(project._id);\n    setFormData(project);\n  };\n\n  const handleDelete = async (id: string) => {\n    if (!confirm('Delete this project?')) return;\n    try {\n      const res = await fetch(`/api/projects/${id}`, { method: 'DELETE' });\n      if (!res.ok) throw new Error('Error deleting project');\n      await fetchProjects();\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  const inputClass =\n    'border border-primary-200 rounded p-1 w-full bg-primary-50 text-primary-900 dark:bg-secondary-900 dark:text-secondary-50 dark:border-secondary-700';\n\n  const tableCellClass =\n    'p-2 border border-primary-200 dark:border-secondary-700';\n\n  return (\n    <div className=\"grid gap-6 p-4 text-primary-900 dark:text-secondary-50\">\n      <h1 className=\"text-2xl font-bold\">Manage Projects</h1>\n\n      <SearchInput\n        value={searchQuery}\n        onChange={setSearchQuery}\n        data={projects}\n        onFilter={setFilteredProjects}\n      />\n\n      <form\n        onSubmit={handleSubmit}\n        className=\"grid gap-2 p-4 rounded-md border border-primary-200 bg-primary-100 dark:border-secondary-700 dark:bg-secondary-800\"\n      >\n        {(\n          [\n            { label: 'Name', name: 'name' },\n            { label: 'Link', name: 'link' },\n            { label: 'Created At', name: 'createdAt' },\n            { label: 'Completed At', name: 'completedAt' },\n            { label: 'Image URL', name: 'image' },\n            { label: 'Tags (comma separated)', name: 'tags' },\n          ] as const\n        ).map(({ label, name }) => (\n          <label key={name}>\n            {label}:\n            <input\n              className={inputClass}\n              type=\"text\"\n              name={name}\n              value={\n                Array.isArray(formData[name])\n                  ? (formData[name] as string[]).join(', ')\n                  : formData[name] ?? ''\n              }\n              onChange={handleChange}\n            />\n          </label>\n        ))}\n\n        <label>\n          Description:\n          <textarea\n            className={inputClass}\n            name=\"description\"\n            rows={3}\n            value={formData.description || ''}\n            onChange={handleChange}\n          />\n        </label>\n\n        <Button type=\"submit\" variant=\"primary\" size=\"md\">\n          {editingProjectId ? 'Update Project' : 'Create Project'}\n        </Button>\n      </form>\n\n      <table className=\"w-full rounded border border-primary-200 dark:border-secondary-700\">\n        <thead className=\"bg-primary-200 dark:bg-secondary-700 text-primary-900 dark:text-secondary-50\">\n          <tr>\n            {['Name', 'Link', 'Created At', 'Completed At', 'Actions'].map(\n              (col) => (\n                <th key={col} className={tableCellClass}>\n                  {col}\n                </th>\n              )\n            )}\n          </tr>\n        </thead>\n        <tbody>\n          {filteredProjects.map((project) => (\n            <tr key={project._id} className=\"border-b\">\n              <td className={tableCellClass}>{project.name}</td>\n              <td className={tableCellClass}>{project.link}</td>\n              <td className={tableCellClass}>{project.createdAt}</td>\n              <td className={tableCellClass}>\n                {project.completedAt || 'Ongoing'}\n              </td>\n              <td className={`${tableCellClass} flex gap-2`}>\n                <Button\n                  onClick={() => handleEdit(project)}\n                  variant=\"ghost\"\n                  size=\"sm\"\n                >\n                  Edit\n                </Button>\n                <Button\n                  onClick={() => handleDelete(project._id)}\n                  variant=\"danger\"\n                  size=\"sm\"\n                >\n                  Remove\n                </Button>\n              </td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}