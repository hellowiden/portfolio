{"version":3,"sources":["../../../../../../apps/marketing/src/app/experiences/layout.tsx"],"sourcesContent":["// src/app/experiences/layout.tsx\n\n'use client';\n\nimport { ReactNode, useState, useEffect } from 'react';\nimport { useRouter, useParams } from 'next/navigation';\nimport { motion } from 'framer-motion';\nimport { FaArrowLeft, FaArrowRight } from 'react-icons/fa';\nimport Button from '@portfolio/ui/components/Button/Button';\n\ninterface IExperience {\n  _id: string;\n}\n\nfunction NavButton({\n  direction,\n  onClick,\n}: {\n  direction: 'prev' | 'next';\n  onClick: () => void;\n}) {\n  const isPrev = direction === 'prev';\n  return (\n    <Button\n      onClick={onClick}\n      variant=\"ghost\"\n      size=\"sm\"\n      className=\"grid grid-cols-[auto_1fr] items-center text-sm sm:gap-2\"\n    >\n      {isPrev && <MotionIcon isPrev />}\n      <span className=\"hidden sm:inline\">\n        {isPrev ? 'Previous Experience' : 'Next Experience'}\n      </span>\n      {!isPrev && <MotionIcon />}\n    </Button>\n  );\n}\n\nfunction MotionIcon({ isPrev = false }: { isPrev?: boolean }) {\n  return (\n    <motion.div\n      initial={{ rotate: isPrev ? -90 : 90, opacity: 0 }}\n      animate={{ rotate: 0, opacity: 1 }}\n      transition={{ duration: 0.2 }}\n    >\n      {isPrev ? <FaArrowLeft /> : <FaArrowRight />}\n    </motion.div>\n  );\n}\n\nexport default function ExperiencesLayout({\n  children,\n}: {\n  children: ReactNode;\n}) {\n  const [experienceIds, setExperienceIds] = useState<string[]>([]);\n  const router = useRouter();\n  const params = useParams();\n\n  const currentExperienceIndex = experienceIds.indexOf(params.slug as string);\n  const isExperiencePage = currentExperienceIndex >= 0;\n\n  useEffect(() => {\n    async function fetchExperiences() {\n      try {\n        const res = await fetch('/api/experiences');\n        if (!res.ok) throw new Error('Failed to fetch experiences');\n        const data = await res.json();\n        setExperienceIds(data.experiences.map((exp: IExperience) => exp._id));\n      } catch (error) {\n        console.error(error);\n      }\n    }\n    fetchExperiences();\n  }, []);\n\n  const navigateToExperience = (direction: 'prev' | 'next') => {\n    if (currentExperienceIndex < 0) return;\n    const newIndex =\n      direction === 'prev'\n        ? currentExperienceIndex - 1\n        : currentExperienceIndex + 1;\n    if (newIndex >= 0 && newIndex < experienceIds.length) {\n      router.push(`/experiences/${experienceIds[newIndex]}`);\n    }\n  };\n\n  return (\n    <div className=\"h-full container mx-auto border-x border-primary-200 dark:border-secondary-700 backdrop-blur-md bg-primary-50 dark:bg-secondary-900 text-primary-900 dark:text-secondary-50 flex flex-col\">\n      <header className=\"flex justify-between items-center p-4 border-b border-primary-200 dark:border-secondary-700 bg-primary-200 dark:bg-secondary-800\">\n        <h1 className=\"text-2xl font-bold\">Experiences</h1>\n        {isExperiencePage && (\n          <div className=\"grid grid-flow-col auto-cols-max gap-4\">\n            {currentExperienceIndex > 0 && (\n              <NavButton\n                direction=\"prev\"\n                onClick={() => navigateToExperience('prev')}\n              />\n            )}\n            {currentExperienceIndex < experienceIds.length - 1 && (\n              <NavButton\n                direction=\"next\"\n                onClick={() => navigateToExperience('next')}\n              />\n            )}\n          </div>\n        )}\n      </header>\n      <main className=\"flex-grow p-6\">{children}</main>\n    </div>\n  );\n}\n"],"names":[],"mappings":"wDAIA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAMA,SAAS,EAAU,WACjB,CAAS,SACT,CAAO,CAIR,EACC,IAAM,EAAS,AAAc,WAC7B,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,OAAM,CAAA,CACL,QAAS,EACT,QAAQ,QACR,KAAK,KACL,UAAU,oEAET,GAAU,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAW,MAAM,CAAA,CAAA,IAC7B,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,4BACb,EAAS,sBAAwB,oBAEnC,CAAC,GAAU,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAA,KAGnB,CAEA,SAAS,EAAW,QAAE,GAAS,CAAK,CAAwB,EAC1D,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAC,GAAG,CAAA,CACT,QAAS,CAAE,OAAQ,EAAS,CAAC,GAAK,GAAI,QAAS,CAAE,EACjD,QAAS,CAAE,OAAQ,EAAG,QAAS,CAAE,EACjC,WAAY,CAAE,SAAU,EAAI,WAE3B,EAAS,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAA,GAAM,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,YAAY,CAAA,CAAA,IAG/C,CAEe,SAAS,EAAkB,UACxC,CAAQ,CAGT,EACC,GAAM,CAAC,EAAe,EAAiB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAW,EAAE,EACzD,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAClB,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAElB,EAAyB,EAAc,OAAO,CAAC,EAAO,IAAI,EAGhE,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,MACR,AAUA,eAVe,EACb,GAAI,CACF,IAAM,EAAM,MAAM,MAAM,oBACxB,GAAI,CAAC,EAAI,EAAE,CAAE,MAAM,AAAI,MAAM,+BAC7B,IAAM,EAAO,MAAM,EAAI,IAAI,GAC3B,EAAiB,EAAK,WAAW,CAAC,GAAG,CAAC,AAAC,GAAqB,EAAI,GAAG,EACrE,CAAE,MAAO,EAAO,CACd,QAAQ,KAAK,CAAC,EAChB,CACF,GAEF,EAAG,EAAE,EAEL,IAAM,EAAuB,AAAC,IAC5B,GAAI,EAAyB,EAAG,OAChC,IAAM,EACU,SAAd,EACI,EAAyB,EACzB,EAAyB,EAC3B,GAAY,GAAK,EAAW,EAAc,MAAM,EAAE,AACpD,EAAO,IAAI,CAAC,CAAC,aAAa,EAAE,CAAa,CAAC,EAAS,CAAA,CAAE,CAEzD,EAEA,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sMACb,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CAAO,UAAU,6IAChB,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,8BAAqB,gBA9BhB,AA+BlB,GA/B4C,GAgC3C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mDACZ,EAAyB,GACxB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CACC,UAAU,OACV,QAAS,IAAM,EAAqB,UAGvC,EAAyB,EAAc,MAAM,CAAG,GAC/C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CACC,UAAU,OACV,QAAS,IAAM,EAAqB,gBAM9C,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,yBAAiB,MAGvC"}