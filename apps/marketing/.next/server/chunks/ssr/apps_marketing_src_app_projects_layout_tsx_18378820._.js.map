{"version":3,"sources":["../../../../../../apps/marketing/src/app/projects/layout.tsx"],"sourcesContent":["// src/app/projects/layout.tsx\n\n'use client';\n\nimport { ReactNode, useState, useEffect } from 'react';\nimport { useRouter, useParams } from 'next/navigation';\nimport { motion } from 'framer-motion';\nimport { FaArrowLeft, FaArrowRight } from 'react-icons/fa';\nimport Button from '@portfolio/ui/components/Button/Button';\n\ninterface Project {\n  _id: string;\n  createdAt: string;\n}\n\ninterface ProjectsResponse {\n  projects: Project[];\n}\n\nfunction NavButton({\n  direction,\n  onClick,\n}: {\n  direction: 'prev' | 'next';\n  onClick: () => void;\n}) {\n  const isPrev = direction === 'prev';\n  return (\n    <Button\n      onClick={onClick}\n      variant=\"ghost\"\n      size=\"sm\"\n      className=\"grid grid-cols-[auto_1fr] items-center text-sm sm:gap-2\"\n    >\n      {isPrev && <MotionIcon isPrev />}\n      <span className=\"hidden sm:inline\">\n        {isPrev ? 'Previous Project' : 'Next Project'}\n      </span>\n      {!isPrev && <MotionIcon />}\n    </Button>\n  );\n}\n\nfunction MotionIcon({ isPrev = false }: { isPrev?: boolean }) {\n  return (\n    <motion.div\n      initial={{ rotate: isPrev ? -90 : 90, opacity: 0 }}\n      animate={{ rotate: 0, opacity: 1 }}\n      transition={{ duration: 0.2 }}\n    >\n      {isPrev ? <FaArrowLeft /> : <FaArrowRight />}\n    </motion.div>\n  );\n}\n\nexport default function ProjectsLayout({ children }: { children: ReactNode }) {\n  const [projects, setProjects] = useState<Project[]>([]);\n  const router = useRouter();\n  const params = useParams();\n\n  useEffect(() => {\n    async function fetchProjects() {\n      try {\n        const res = await fetch('/api/projects');\n        if (!res.ok) throw new Error('Failed to fetch projects');\n\n        const data: ProjectsResponse = await res.json();\n        const sortedProjects = data.projects.sort((a, b) => {\n          const dateA = new Date(\n            a.createdAt.split('-').reverse().join('-')\n          ).getTime();\n          const dateB = new Date(\n            b.createdAt.split('-').reverse().join('-')\n          ).getTime();\n          return dateB - dateA;\n        });\n\n        setProjects(sortedProjects);\n      } catch (error) {\n        console.error(error);\n      }\n    }\n    fetchProjects();\n  }, []);\n\n  const projectIds = projects.map((p) => p._id);\n  const currentProjectIndex = projectIds.indexOf(params.slug as string);\n  const isProjectPage = currentProjectIndex >= 0;\n\n  const navigateToProject = (direction: 'prev' | 'next') => {\n    if (currentProjectIndex < 0) return;\n    const newIndex =\n      direction === 'prev' ? currentProjectIndex - 1 : currentProjectIndex + 1;\n    if (newIndex >= 0 && newIndex < projectIds.length) {\n      router.push(`/projects/${projectIds[newIndex]}`);\n    }\n  };\n\n  return (\n    <div className=\"h-full container mx-auto border-x border-primary-200 dark:border-secondary-700 backdrop-blur-md bg-primary-50 dark:bg-secondary-900 text-primary-900 dark:text-secondary-50 flex flex-col\">\n      <header className=\"flex justify-between items-center p-4 border-b border-primary-200 dark:border-secondary-700 bg-primary-200 dark:bg-secondary-800\">\n        <h1 className=\"text-2xl font-bold\">Projects</h1>\n        {isProjectPage && (\n          <div className=\"grid grid-flow-col auto-cols-max gap-4\">\n            {currentProjectIndex > 0 && (\n              <NavButton\n                direction=\"prev\"\n                onClick={() => navigateToProject('prev')}\n              />\n            )}\n            {currentProjectIndex < projectIds.length - 1 && (\n              <NavButton\n                direction=\"next\"\n                onClick={() => navigateToProject('next')}\n              />\n            )}\n          </div>\n        )}\n      </header>\n      <main className=\"flex-grow p-6\">{children}</main>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}